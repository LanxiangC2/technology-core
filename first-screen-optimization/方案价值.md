## 简历和面试

### 简历

**项目名**： <写你做过的真实项目>

**岗位**： 中级 / 高级 前端工程师 / 前端架构师

**项目介绍**： 

介绍你的真实项目

**项目职责**：

介绍你的项目职责

- 负责/参与项目优化方案的制定和实施

**项目亮点**：

针对客户反馈的首屏慢问题制定了详细的优化策略并完整参与了优化措施的落地。

通过数据埋点收集和定位性能问题，通过本地实验室复现问题。针对问题制定了具体的优化措施，包括解决了HTTP1.1的队头阻塞和头部无压缩的问题，以及开发了自动化工具完成自动代码提重从而压缩包体积等诸多手段。

经过优化后的代码LCP时间降低了80%，同时提供了一套完整标准的工单流程。

### 面试

**请讲讲你是如何首屏优化的**

> 策略的制定

无论是做哪一种优化，都需要经过三个步骤：定位问题、解决问题、测试反馈。

很多时候都是在这三个步骤间反复轮询。

而我们项目的难点在于我们的产品很多是私有化部署，并且用户可以通过低码平台实现产品的高度定制。也就是说我们无法知晓客户定制了哪些内容，由定制产生了多少JS文件，无法复现客户的运行环境，无法复现客户的问题。

所以我首先是制定了一套完整的工单申报流程，为每个客户提出的问题发起工单，然后在本地开启工单的代码分支，在分支里面针对性的加入埋点代码，然后推送代码给用户。

用户一端收集的信息经过数据脱敏后上报到我们的数据中心，我这边根据数据最终定位问题。

下面我挑一两个问题说吧。

> 技术实现

我们当时遇到的一个比较大的问题是HTTP1.1的效率问题，因为我们的客户有些浏览器是不支持HTTP2的，而首屏加载的资源量数量非常多，受我们架构的影响又很难合并它们，所以会遇到HTTP1.1的队头阻塞和头部压缩的问题。

针对队头阻塞，我使用了多域名的方式解决，这是常规手段，没多少可说的。而头部压缩这一块，我是借鉴了HTTP2的做法，在客户端和服务器分别建立静态表和动态表，把所有的自定义头部压缩成了一个，压缩比最高可以达到90，这是非常惊人的。

另外除了网络这一块，还遇到一个比较棘手的问题就是重复代码。客户那边很多代码是他们通过低码平台自动生成的，有些定制度比较高的客户可能生成了好几百个JS，这些JS文件中存在大量重复的代码，从而增加了整体的传输体积。

所以我开发了一套任务，它可以自动嗅探到多个JS文件中的重复代码，并把他们提取到一个公共JS中形成一个一个的函数，把差异化的地方自动提取为参数，然后自动修改原始JS文件的相应位置，把它们变成一个一个的函数调用。

这件事说起来简单，实际开发起来其实是非常复杂的，它涉及到抽象语法树分析、树结构对比从而发现重复和提取重复、hash运算和数据库存储等一系列的事情，因为这件事是在BFF层完成的，所以也是由我们前端处理的。

其他的优化还有很多，有些简单有些麻烦，但最棘手、我印象最深的就是上面两点。